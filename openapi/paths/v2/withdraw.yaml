/withdraw:
  post:
    operationId: withdraw
    summary: Withdraw
    description: |
      The withdraw method generates, signs, and returns a transaction that transfers the amount of coin to the address indicated in the to argument.
      
      This method generates a raw transaction which should then be broadcast using send_raw_transaction.
    x-mdx-doc-path: ../../src/pages/komodo-defi-framework/api/v20/wallet/tx/withdraw/index.mdx
    requestBody:
      required: true
      content:
        application/json:
          schema:
            allOf:
              - $ref: '../../../components/schemas/Common.yaml#/RpcV2Request'
              - type: object
                properties:
                  method:
                    type: string
                    enum: ["withdraw"]
                    description: The method name
                    example: "withdraw
                  params:
                    type: object
                    properties:
                      coin:
                        $ref: ../../../components/schemas/Common.yaml#/CoinTicker
                        description: The name of the coin the user desires to withdraw
                      to:
                        type: string
                        description: Coins are withdrawn to this address
                        example: "RJTYiYeJ8eVvJ53n2YbrVmxWNNMVZjDGLh
                      amount:
                        $ref: ../../../components/schemas/Common.yaml#/AmountString
                        description: The amount the user desires to withdraw, ignored when max=true
                      memo:
                        type: string
                        description: Optional. Adds a transaction memo for compatible coins (e.g. Tendermint ecosystem)
                      max:
                        type: boolean
                        description: Optional. Withdraw the maximum available amount
                        default: false
                        example: false
                      fee:
                        $ref: ../../components/schemas/Wallet.yaml#/FeeInfo
                        description: Optional. A standard FeeInfo object
                      from:
                        $ref: ../../components/schemas/Wallet.yaml#/WithdrawFromInfo
                        description: HD wallets only. A standard WithdrawFromInfo object
                      ibc_source_channel:
                        type: string
                        description: Tendermint IBC transfers only. The source channel for the IBC transaction
                    required:
                      - coin
                      - to
                      - amount
    responses:
      '200':
        description: Withdrawal transaction created successfully
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../../../components/schemas/Common.yaml#/RpcSuccessResponse'
                - type: object
                  properties:
                    result:
                      type: object
                      properties:
                        from:
                          type: array
                          items:
                            type: string
                          description: Coins are withdrawn from this address; the array contains a single element, but transactions may be sent from several addresses (UTXO coins)
                          example: ["RHound8PpyhVLfi56dC7MK3ZvvkAmB3bvQ"]
                        to:
                          type: array
                          items:
                            type: string
                          description: Coins are withdrawn to this address; this may contain the my_address address, where change from UTXO coins is sent
                          example: ["RJTYiYeJ8eVvJ53n2YbrVmxWNNMVZjDGLh"]
                        my_balance_change:
                          $ref: ../../../components/schemas/Common.yaml#/AmountString
                          description: The expected balance of change in my_address after the transaction broadcasts
                        received_by_me:
                          $ref: ../../../components/schemas/Common.yaml#/AmountString
                          description: The amount of coins received by my_address after the transaction broadcasts; the value may be above zero when the transaction requires that the Komodo DeFi Framework API send change to my_address
                        spent_by_me:
                          $ref: ../../../components/schemas/Common.yaml#/AmountString
                          description: The amount of coins spent by my_address; this value differ from the request amount, as the transaction fee is added here
                        total_amount:
                          $ref: ../../../components/schemas/Common.yaml#/AmountString
                          description: The total amount of coins transferred
                        fee_details:
                          type: object
                          description: The fee details of the generated transaction; this value differs for utxo and ETH/ERC20 coins
                        tx_hash:
                          type: string
                          pattern: "^[a-fA-F0-9]{64}$
                          description: The hash of the generated transaction
                          example: "aa456a6288292c4980637083871a6a4a1fb0a2242f6a30ae974069311691f37c
                        tx_hex:
                          type: string
                          description: Transaction bytes in hexadecimal format; use this value as input for the send_raw_transaction method
                          example: "0400008085202f890152db2e550ca2d69eed487c95b6089b0f12e7a8937a89b8754c38a8c361560fca000000006a47304402200220239769f48c8bc96fbbcb66bcc0483f6234cb48ab823e13f0b791cdd501b902204f8b2dd875609e35f1677e39e403a18e9d2d98cd9916f51a62ac1edfc350cd47012102b3c168ed4acd96594288cee3114c77de51b6afe1ab6a866887a13a96ee80f33cffffffff0290a00b00000000001976a9145d904d4531f4c74f760a14ef057c866a06705dda88ac37040700000000001976a9145d904d4531f4c74f760a14ef057c866a06705dda88ac0609ed67000000000000000000000000000000
                        coin:
                          $ref: ../../../components/schemas/Common.yaml#/CoinTicker
                          description: The name of the coin the user wants to withdraw
                        block_height:
                          type: integer
                          description: Block height of the transaction
                          example: 0
                        timestamp:
                          type: integer
                          description: Timestamp of the transaction
                          example: 1743589636
                        internal_id:
                          type: string
                          description: Internal transaction identifier
                          example: "
                        kmd_rewards:
                          type: object
                          description: Optional. An object containing information about accrued rewards; always exists if the coin is KMD
                          properties:
                            amount:
                              $ref: ../../../components/schemas/Common.yaml#/AmountString
                              description: The amount of accrued rewards
                            claimed_by_me:
                              type: boolean
                              description: Whether the rewards been claimed by me
                              example: true
                        transaction_type:
                          type: string
                          enum: ["StandardTransfer"]
                          description: Type of transaction
                          example: "StandardTransfer
                        memo:
                          type: string
                          description: Transaction memo
                          nullable: true
                          example: null
                      required:
                        - from
                        - to
                        - my_balance_change
                        - received_by_me
                        - spent_by_me
                        - total_amount
                        - fee_details
                        - tx_hash
                        - tx_hex
                        - coin
                        - block_height
                        - timestamp
                        - transaction_type
      '400':
        description: Bad request
        content:
          application/json:
            schema:
              $ref: '../../../components/schemas/Common.yaml#/RpcErrorResponse'
      '500':
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: '../../../components/schemas/Common.yaml#/RpcErrorResponse' 