/api/v2/method:
  post:
    operationId: withdraw
    summary: 'Komodo DeFi Framework Method: Withdraw'
    description: The withdraw method generates, signs, and returns a transaction that
      transfers the amount of coin to the address indicated in the to argument.
    tags:
    - Komodo DeFi Framework API V2
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              method:
                type: string
                enum:
                - withdraw
                description: The method name
              userpass:
                type: string
                description: RPC password for authentication
                example: RPC_UserP@SSW0RD
              mmrpc:
                type: string
                enum:
                - '2.0'
                description: The JSON-RPC version
                example: '2.0'
              params:
                type: object
                properties:
                  coin:
                    description: The name of the coin the user desires to withdraw.
                    type: string
                    default: '-'
                  to:
                    description: Coins are withdrawn to this address.
                    type: string
                    default: '-'
                  amount:
                    description: The amount the user desires to withdraw, ignored
                      when `max=true`.
                    type: string
                    enum:
                    - max=true
                    example: max=true
                    default: '-'
                  fee:
                    $ref: '#/components/schemas/FeeInfo'
                    description: A standard [FeeInfo](/komodo-defi-framework/api/common_structures/wallet/#fee-info)
                      object.
                  from:
                    $ref: '#/components/schemas/WithdrawFromInfo'
                    description: HD wallets only. A standard [WithdrawFromInfo](/komodo-defi-framework/api/common_structures/wallet/#withdraw-from-info)
                      object.
                  ibc_source_channel:
                    $ref: '#/components/schemas/IBC'
                    description: Tendermint IBC transfers only. The source channel
                      for the [IBC](https://tutorials.cosmos.network/academy/3-ibc/1-what-is-ibc.html)
                      transaction.
                  max:
                    description: Withdraw the maximum available amount.
                    type: boolean
                    default: '`false`'
                  memo:
                    description: Adds a transaction memo for compatible coins (e.g.,
                      Tendermint ecosystem).
                    type: string
                    default: '-'
                  broadcast:
                    description: Optional, defaults to `false`. When `false`, signed
                      transaction hex must be broadcast manually with [send\_raw\_transaction](/komodo-defi-framework/api/legacy/send_raw_transaction/).
                      Must be set to `true` for Metamask managed transactions.
                    type: boolean
                    enum:
                    - 'true'
                    - 'false'
                    example: 'true'
                    default: '`false`'
                required:
                - coin
                - to
            required:
            - method
            - userpass
            - mmrpc
            - params
    responses:
      '200':
        description: Success
        content:
          application/json:
            schema:
              type: object
              properties:
                mmrpc:
                  type: string
                  enum:
                  - '2.0'
                  description: The JSON-RPC version
                result:
                  type: object
                  properties:
                    coin:
                      type: string
                      description: The name of the coin the user wants to withdraw.
                    fee_details:
                      type: object
                      description: The fee details of the generated transaction; this
                        value differs for UTXO and ETH/ERC20 coins. Check the examples
                        for more details.
                    from:
                      type: string
                      description: Coins are withdrawn from this address; the array
                        contains a single element, but transactions may be sent from
                        several addresses (UTXO coins).
                    kmd_rewards:
                      type: object
                      description: An object containing information about accrued
                        rewards; always exists if the coin is `KMD`.
                    kmd_rewards.amount:
                      type: string
                      description: The amount of accrued rewards.
                    kmd_rewards.claimed_by_me:
                      type: string
                      description: Whether the rewards have been claimed by me.
                    my_balance_change:
                      type: string
                      description: The expected balance change in `my_address` after
                        the transaction broadcasts.
                    received_by_me:
                      type: string
                      description: The amount of coins received by `my_address` after
                        the transaction broadcasts; the value may be above zero when
                        the transaction requires that the Komodo DeFi Framework API
                        send change to `my_address`.
                    spent_by_me:
                      type: string
                      description: The amount of coins spent by `my_address`; this
                        value may differ from the request amount, as the transaction
                        fee is added here.
                    to:
                      type: string
                      description: Coins are withdrawn to this address; this may contain
                        the `my_address` address, where change from UTXO coins is
                        sent.
                    total_amount:
                      type: string
                      description: The total amount of coins transferred.
                    tx_hash:
                      type: string
                      description: The hash of the generated transaction.
                    tx_hex:
                      type: string
                      description: transaction bytes in hexadecimal format; use this
                        value as input for [send\_raw\_transaction](/komodo-defi-framework/api/legacy/send_raw_transaction/)
                  description: The response result
                id:
                  type:
                  - integer
                  - string
                  - 'null'
                  description: The request ID
      '400':
        description: Bad request
      '500':
        description: Internal server error
