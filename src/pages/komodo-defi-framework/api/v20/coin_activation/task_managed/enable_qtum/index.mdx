export const title = "Komodo DeFi Framework: QTUM Activation Tasks";
export const description =
  "The methods in this document allow activation of QTUM.";

import trezorpin from "@/public/images/docs/api-images/trezor_pin.png";

# Komodo DeFi Framework Method: QTUM Activation Tasks

## task::enable\_qtum::init {{label : 'task::enable_qtum::init', tag : 'API-v2'}}

Use this method for task managed activation of QTUM coins and tokens. Refer to the [task managed activation overview](/komodo-defi-framework/api/v20/coin_activation/task_managed/) for activation of other coin types.

### Request Arguments

| Parameter          | Type   | Required |     Default    | Description                                                                                                                                                                                |
| ------------------ | ------ | :------: | :------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| ticker             | string |     âœ“    |        -       | Ticker of the QTUM-based coin you want to enable.                                                                                                                                          |
| activation\_params | object |     âœ“    |        -       | A standard [ActivationParams](/komodo-defi-framework/api/common_structures/activation/#activation-params) object containing activation configuration parameters for QTUM coins and tokens. |
| priv\_key\_policy  | string |     âœ—    | ContextPrivKey | Value can be [PrivKeyActivationPolicyEnum](/komodo-defi-framework/api/common_structures/enums/#priv-key-activation-policy-enum).                                                           |

### Response Parameters

| Parameter | Type    | Description                                               |
| --------- | ------- | --------------------------------------------------------- |
| task\_id  | integer | An identifying number which is used to query task status. |

#### ðŸ“Œ Examples

#### Command

<CodeGroup title="QTUM Activation (Trezor mode)" tag="POST" label="task::enable_qtum::init" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "mmrpc": "2.0",
    "method": "task::enable_qtum::init",
    "params": {
      "ticker": "QTUM",
      "activation_params": {
        "mode": {
          "rpc": "Electrum",
          "rpc_data": {
            "servers": [
              {
                "url": "electrum2.cipig.net:10050"
              },
              {
                "url": "electrum3.cipig.net:20050",
                "ws_url": "electrum3.cipig.net:30050",
                "protocol": "SSL"
              }
            ]
          }
        },
        "scan_policy": "scan_if_new_wallet",
        "priv_key_policy": "Trezor",
        "min_addresses_number": 3,
        "gap_limit": 20
      }
    }
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  #### Response

  ```json
  {
    "mmrpc": "2.0",
    "result": {
      "task_id": 1
    },
    "id": null
  }
  ```
</CollapsibleSection>

## task::enable\_qtum::status {{label : 'task::enable_qtum::status', tag : 'API-v2'}}

After running the `task::enable_qtum::init` method, we can query the status of activation to check its progress.
The response will return the following:

*   Result of the task (success or error)
*   Progress status (what state the task is in)
*   Required user action (what user should do before the task can continue)

### Request Arguments

| Parameter            | Type    | Required | Default | Description                                                                 |
| -------------------- | ------- | :------: | :-----: | --------------------------------------------------------------------------- |
| task\_id             | integer |     âœ“    |    -    | The identifying number returned when initiating the initialisation process. |
| forget\_if\_finished | boolean |     âœ—    |   true  | If false, will return final response for completed tasks.                   |

#### Request

<CodeGroup title="QTUM Activation Status" tag="POST" label="task::enable_qtum::status" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "mmrpc": "2.0",
    "method": "task::enable_qtum::status",
    "params": {
      "task_id": 0,
      "forget_if_finished": false
    }
  }
  ```
</CodeGroup>

The response formats for this method are the same as the [task managed activation](/komodo-defi-framework/api/v20/coin_activation/task_managed/) responses.

## task::enable\_qtum::user\_action {{label : 'task::enable_qtum::user_action', tag : 'API-v2'}}

If the `task::enable_qtum::status` returns `UserActionRequired`, we need to use the `task::enable_qtum::user_action` method to enter our PIN

### Request Arguments

| Parameter                 | Type            | Required | Description                                                                                                                                                                                      |
| ------------------------- | --------------- | :------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| task\_id                  | integer         |     âœ“    | The identifying number returned when initiating the initialisation process.                                                                                                                      |
| user\_action              | object          |     âœ“    | Object containing the params below                                                                                                                                                               |
| user\_action.action\_type | string          |     âœ“    | Will be `TrezorPin` for this method                                                                                                                                                              |
| user\_action.pin          | string (number) |     âœ“    | When the Trezor device is displaying a grid of numbers for PIN entry, this param will contain your Trezor pin, as mapped through your keyboard numpad. See the image below for more information. |

<OptimizedImage src={trezorpin} classNaming="w-full" alt="Trezor Pin" />

### Response Parameters

| Parameter | Type   | Description                 |
| --------- | ------ | --------------------------- |
| result    | string | The outcome of the request. |

#### ðŸ“Œ Examples

#### Command

<CodeGroup title="task::enable_qtum::user_action" tag="POST" label="task::enable_qtum::user_action" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "mmrpc": "2.0",
    "method": "task::enable_qtum::user_action",
    "params": {
      "task_id": 0,
      "user_action": {
        "action_type": "TrezorPin",
        "pin": "862743"
      }
    }
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  #### Response (success)

  ```json
  {
    "mmrpc": "2.0",
    "result": "success",
    "id": null
  }
  ```
</CollapsibleSection>

## Error Cases

`CoinCreationError`: Returned when a coin is not supported.

```json
{
  "mmrpc": "2.0",
  "result": {
    "status": "Error",
    "details": {
      "error": "Error on platform coin QTUM creation: Coin doesn't support Trezor hardware wallet. Please consider adding the 'trezor_coin' field to the coins config",
      "error_path": "lib.init_qtum_activation.utxo_coin_builder",
      "error_trace": "lib:103] init_qtum_activation:71] utxo_coin_builder:234]",
      "error_type": "CoinCreationError",
      "error_data": {
        "ticker": "QTUM",
        "error": "Coin doesn't support Trezor hardware wallet. Please consider adding the 'trezor_coin' field to the coins config"
      }
    }
  },
  "id": null
}
```

## task::enable\_qtum::cancel {{label : 'task::enable_qtum::cancel', tag : 'API-v2'}}

If you want to cancel the enabling process before it has completed, you can use this method.

### Request Arguments

| Parameter | Type    | Required | Description                                                           |
| --------- | ------- | :------: | --------------------------------------------------------------------- |
| task\_id  | integer |     âœ“    | The identifying number returned when initiating the enabling process. |

### Response Parameters

| Parameter    | Type   | Description                                                    |
| ------------ | ------ | -------------------------------------------------------------- |
| result       | string | Indicates task cancellation was succesful.                     |
| error        | string | An error message to explain what went wrong.                   |
| error\_path  | string | An indicator of the class or function which reurned the error. |
| error\_trace | string | An indicator of where in the source code the error was thrown. |
| error\_type  | string | An enumerated value for the returned error.                    |
| error\_data  | string | The input task ID which resulted in the error.                 |

#### ðŸ“Œ Examples

#### Command

<CodeGroup title="task::enable_qtum::cancel" tag="POST" label="task::enable_qtum::cancel" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "task::enable_qtum::cancel",
    "mmrpc": "2.0",
    "params": {
      "task_id": 3
    }
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  #### Response (success)

  ```json
  {
    "mmrpc": "2.0",
    "result": "success",
    "id": null
  }
  ```
</CollapsibleSection>
