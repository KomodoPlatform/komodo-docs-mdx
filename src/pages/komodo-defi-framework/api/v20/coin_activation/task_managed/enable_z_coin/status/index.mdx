export const title = "Komodo DeFi Framework Method: Enable Z Coin Task: Status";
export const description = "Query the status of ZHTLC coin activation task.";

# Enable Z Coin Task: Status

## task::enable\_z\_coin::status {{label : 'task::enable_z_coin::status', tag : 'API-v2'}}

Z coins need to build sync a local block cache and wallet database before they can be used. Using `task_id` as an input, this method will return the current status of the activation process.

### Request Parameter Table

| Parameter            | Type    | Required | Default | Description                                                                 |
| -------------------- | ------- | :------: | :-----: | --------------------------------------------------------------------------- |
| task\_id             | integer |     âœ“    |    -    | The identifying number returned when initiating the initialisation process. |
| forget\_if\_finished | boolean |     âœ—    |  `true` | If false, will return final response for completed tasks.                   |

### Response Parameter Table

| Parameter | Type   | Description                                                                                                           |
| --------- | ------ | --------------------------------------------------------------------------------------------------------------------- |
| status    | string | A short indication of how the enabling is progressing.                                                                |
| details   | object | Depending on the state of enabling progress, this will contain different information as shown in the responses below. |

Possible `status` values while activation is in progress:

*   `ActivatingCoin`: The first step of activation. It does not require any action from the user.
*   `RequestingWalletBalance`: The first step of activation, while initial balances info is being requested. It does not require any action from the user.
*   `Finishing`: Activation process completed
*   `WaitingForTrezorToConnect`: Waiting for the user to plugin a Trezor device
*   `FollowHwDeviceInstructions`: Waiting for the user to follow the instructions on the device

Once complete, `status`  will be `Ok`, and the `details` object will have the following structure:

| Parameter       | Type    | Description                                                                                                                                                                                                          |
| --------------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| current\_block  | integer | Block height of the coin being activated                                                                                                                                                                             |
| ticker          | string  | Ticker of the coin being activated.                                                                                                                                                                                  |
| wallet\_balance | object  | A standard [WalletBalanceInfo](/komodo-defi-framework/api/common_structures/wallet/#wallet-balance-info) object. Note: the structure may vary based on the `get_balances` parameter value in the activation request. |

#### ðŸ“Œ Examples

#### Status of Z coin activation

<CodeGroup title="task::enable_z_coin::status" tag="POST" label="task::enable_z_coin::status" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "task::enable_z_coin::status",
    "mmrpc": "2.0",
    "params": {
      "task_id": 0,
      "forget_if_finished": false
    }
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  #### Response (ActivatingCoin - enabling has started)

  ```json
  {
    "mmrpc": "2.0",
    "result": {
      "status": "InProgress",
      "details": "ActivatingCoin"
    },
    "id": null
  }
  ```

  #### Response (UpdatingBlocksCache)

  ```json
  {
    "mmrpc": "2.0",
    "result": {
      "status": "InProgress",
      "details": {
        "UpdatingBlocksCache": {
          "current_scanned_block": 265930,
          "latest_block": 269656
        }
      }
    },
    "id": null
  }
  ```

  #### Response (BuildingWalletDb)

  ```json
  {
    "mmrpc": "2.0",
    "result": {
      "status": "InProgress",
      "details": {
        "BuildingWalletDb": {
          "current_scanned_block": 265311,
          "latest_block": 269656
        }
      }
    },
  "id": null
  }
  ```

  #### Response (Enabling complete)

  ```json
  {
    "mmrpc": "2.0",
    "result": {
      "status": "Ok",
      "details": {
        "ticker": "ZOMBIE",
        "current_block": 269657,
        "wallet_balance": {
          "wallet_type": "Iguana",
          "address": "zs1e3puxpnal8ljjrqlxv4jctlyndxnm5a3mj5rarjvp0qv72hmm9caduxk9asu9kyc6erfx4zsauj",
          "balance": {
            "spendable": "29.99989008",
            "unspendable": "0"
          }
        }
      }
    },
    "id": null
  }
  ```
</CollapsibleSection>

### Error Types

| Parameter      | Type   | Description                                                                                                         |
| -------------- | ------ | ------------------------------------------------------------------------------------------------------------------- |
| status         | string | A short indication of how the requested process is progressing.                                                     |
| details.result | object | Depending on the state of process progress, this will contain different information as detailed in the items below. |
| .error         | string | The ticker of the coin being activated                                                                              |
| .error\_path   | string | Used for debugging. A reference to the function in code base which returned the error                               |
| .error\_trace  | string | Used for debugging. A trace of lines of code which led to the returned error                                        |
| .error\_type   | string | An enumerated error identifier to indicate the category of error                                                    |
| .error\_data   | string | Additional context for the error type                                                                               |

Possible Error Cases:

*   `TaskTimedOut` - Timed out waiting for coin activation, connecting to the device trezor or for user to confirm pubkey)
*   `CoinCreationError` - Error during activation. E.g. incorrect or inactive electrum servers.
*   `HwError` - **This is the most important error type.** Unlike other error types, `HwError` requires the GUI / User to check the details in `error_data` field to know which action is required. View the [HwError error type details](/komodo-defi-framework/api/v20/utils/task_init_trezor/status/#details-for-hw-error-error-type) for more info.

<CollapsibleSection expandedText="Hide Error Responses" collapsedText="Show Error Responses">
  #### Response (CoinCreationError - no Zcash Params)

  ```json
  {
   "error": "Error on platform coin ZOMBIE creation: ZCashParamsNotFound",
   "error_path": "lib.z_coin_activation.z_coin",
   "error_trace": "lib:104] z_coin_activation:218] z_coin:1007]",
   "error_type": "CoinCreationError",
   "error_data": {
   "ticker": "ZOMBIE",
   "error": "ZCashParamsNotFound"
   }
  }
  ```

  #### Response (error - NoSuchTask)

  You'll see this if the task number does not exist, or the task has already completed.

  ```json
  {
    "mmrpc": "2.0",
    "error": "No such task '1'",
    "error_path": "init_standalone_coin",
    "error_trace": "init_standalone_coin:119]",
    "error_type": "NoSuchTask",
    "error_data": 1,
    "id": null
  }
  ```

  #### Response (error - InvalidRequest)

  ```json
  {
    "mmrpc": "2.0",
    "error": "Error parsing request: invalid value: integer `-205`, expected u64",
    "error_path": "dispatcher",
    "error_trace": "dispatcher:109]",
    "error_type": "InvalidRequest",
    "error_data": "invalid value: integer `-205`, expected u64",
    "id": 42
  }
  ```

  #### Response (no Zcash Params)

  ```json
  {
    "mmrpc": "2.0",
    "result": {
      "status": "Error",
      "details": {
        "error": "Error on platform coin ZOMBIE creation: ZCashParamsNotFound",
        "error_path": "lib.z_coin_activation.z_coin",
        "error_trace": "lib:103] z_coin_activation:192] z_coin:761]",
        "error_type": "CoinCreationError",
        "error_data": {
          "ticker": "ZOMBIE",
          "error": "ZCashParamsNotFound"
        }
      }
    },
    "id": null
  }
  ```
</CollapsibleSection>
