export const title = "List Payments by Filter";
export const description = "List Lightning Network payments by filter using the Komodo DeFi Framework.";

# List Payments by Filter

## List Payments by Filter {{label : 'lightning::payments::list_payments_by_filter', tag : 'API-v2'}}

The `lightning::payments::list_payments_by_filter` method returns a list of payments (sent and/or received) for a coin which match the given filter.

### Request Arguments

| Parameter       | Type    | Required | Default | Description                                                                                                                   |
| --------------- | ------- | :------: | :-----: | ----------------------------------------------------------------------------------------------------------------------------- |
| coin            | string  |     âœ“    |   `-`   | Ticker of the coin to query.                                                                                                  |
| filter          | object  |     âœ—    |   `-`   | A standard [LightningPaymentFilter](/komodo-defi-framework/api/common_structures/lightning/#lightning-payment-filter) object. |
| paging_options | object  |     âœ—    |   `-`   | A standard [Pagination](/komodo-defi-framework/api/common_structures/#pagination) object.                                     |
| limit           | integer |     âœ—    |   `10`  | Maximum number of results to return.                                                                                          |

#### ðŸ“Œ Example without filter

<CodeGroup title="List Payments by Filter" tag="POST" label="lightning::payments::list_payments_by_filter" mm2MethodDecorate="true">
  ```json
  {
    "method": "lightning::payments::list_payments_by_filter",
    "userpass": "RPC_UserP@SSW0RD",
    "mmrpc": "2.0",
    "params": {
      "coin": "tBTC-lightning"
    },
    "id": 1
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  #### Response

  ```json
  {
   "mmrpc": "2.0",
   "result": {
    "payments": [{
     "payment_hash": "59175643db24fc79c77da073994d596444b6909fb2d452bde662ae386115c758",
     "payment_type": {
      "type": "Inbound Payment"
     },
     "description": "For the burger on Tuesday",
     "amount_in_msat": 10000,
     "status": "pending",
     "created_at": 1683917593,
     "last_updated": 1683917593
    }, {
     "payment_hash": "3ff39605f214a4b4159f9c4f44c94de3a273f300042ca18b7cb3d62f270a9ebc",
     "payment_type": {
      "type": "Outbound Payment"
     },
     "description": "A 1:24 scale model of a 1981 DeLorean DMC-12",
     "amount_in_msat": 88000,
     "status": "succeeded",
     "created_at": 1683815625,
     "last_updated": 1683815721
    }, {
     "payment_hash": "c4f44c94214a4b4159f9273f30de3a3ff39605f18b7c27b3d62f0a9ebc",
     "payment_type": {
      "type": "Outbound Payment"
     },
     "description": "Grays Sports Almanac, 1950-2000",
     "amount_in_msat": 1000000000,
     "status": "succeeded",
     "created_at": 1683714225,
     "last_updated": 1683805721
    }, {
     "payment_hash": "c4f44c94214a4b4159f9273f30de3a3ff39605f18b7c27b3d62f0a9ebc",
     "payment_type": {
      "type": "Outbound Payment"
     },
     "description": "ACME shrink ray",
     "amount_in_msat": 4000012,
     "status": "succeeded",
     "created_at": 1683814625,
     "last_updated": 1683815321
    }],
    "limit": 10,
    "skipped": 0,
    "total": 6,
    "total_pages": 1,
    "paging_options": {
     "PageNumber": 1
    }
   },
   "id": 1
  }
  ```
</CollapsibleSection>

#### Example for Inbound Payment `payment_type`, `limit` and `pagination`

<CodeGroup title="List Payments by Filter" tag="POST" label="lightning::payments::list_payments_by_filter" mm2MethodDecorate="true">
  ```json
  {
    "method": "lightning::payments::list_payments_by_filter",
    "userpass": "RPC_UserP@SSW0RD",
    "mmrpc": "2.0",
    "params": {
      "coin": "tBTC-lightning",
      "filter": {
        "payment_type": {
          "type": "Inbound Payment"
        }
      },
      "limit": 2,
      "paging_options": {
        "PageNumber": 2
      }
    },
    "id": 1
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  ```json
  {
   "mmrpc": "2.0",
   "result": {
    "payments": [{
     "payment_hash": "e51f1526d3322ddc0aaa0e893e5875418ddd12f206b7e1545c8e4375c97d0e31",
     "payment_type": {
      "type": "Inbound Payment"
     },
     "description": "For the burger on Tuesday",
     "amount_in_msat": 10000,
     "status": "pending",
     "created_at": 1683916900,
     "last_updated": 1683916900
    }, {
     "payment_hash": "605f214a4b4b159f9c4f44c94de3a273f3ff39300042ca18b7cbb4159f3d62f2",
     "payment_type": {
      "type": "Inbound Payment"
     },
     "description": "14 pallets of frozen spinach",
     "amount_in_msat": 56005000,
     "status": "succeeded",
     "created_at": 1683815625,
     "last_updated": 1683815721
    }],
    "limit": 2,
    "skipped": 2,
    "total": 7,
    "total_pages": 4,
    "paging_options": {
     "PageNumber": 2
    }
   },
   "id": 1
  }
  ```
</CollapsibleSection>

#### Example for `pending` payments between 10000 and 40000 millisatoshis

<CodeGroup title="List Payments by Filter" tag="POST" label="lightning::payments::list_payments_by_filter" mm2MethodDecorate="true">
  ```json
  {
    "method": "lightning::payments::list_payments_by_filter",
    "userpass": "RPC_UserP@SSW0RD",
    "mmrpc": "2.0",
    "params": {
      "coin": "tBTC-lightning",
      "filter": {
        "status": "pending",
        "from_amount_msat": 10000,
        "to_amount_msat": 40000
      }
    },
    "id": 1
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  #### Response

  ```json
  {
   "mmrpc": "2.0",
   "result": {
    "payments": [{
     "payment_hash": "e51f1526d3322ddc0aaa0e893e5875418ddd12f206b7e1545c8e4375c97d0e31",
     "payment_type": {
      "type": "Inbound Payment"
     },
     "description": "For the burger on Tuesday",
     "amount_in_msat": 10000,
     "status": "pending",
     "created_at": 1683916900,
     "last_updated": 1683916900
    }],
    "limit": 10,
    "skipped": 6,
    "total": 1,
    "total_pages": 1,
    "paging_options": {
     "PageNumber": 1
    }
   },
   "id": 1
  }
  ```
</CollapsibleSection>

#### Example for successful payments on the 20th of April 2023

<CodeGroup title="List Payments by Filter" tag="POST" label="lightning::payments::list_payments_by_filter" mm2MethodDecorate="true">
  ```json
  {
    "method": "lightning::payments::list_payments_by_filter",
    "userpass": "RPC_UserP@SSW0RD",
    "mmrpc": "2.0",
    "params": {
      "coin": "tBTC-lightning",
      "filter": {
        "status": "succeeded",
        "from_timestamp": 1681948800,
        "to_timestamp": 1682035199
      }
    },
    "id": 1
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  #### Response

  ```json
  {
   "mmrpc": "2.0",
   "result": {
    "payments": [{
     "payment_hash": "c4f44c94214a4b4159f9273f30de3a3ff39605f18b7c27b3d62f0a9ebc",
     "payment_type": {
      "type": "Outbound Payment"
     },
     "description": "Grays Sports Almanac, 1950-2000",
     "amount_in_msat": 1000000000,
     "status": "succeeded",
     "created_at": 1681998480,
     "last_updated": 1682008491
    }],
    "limit": 10,
    "skipped": 6,
    "total": 1,
    "total_pages": 1,
    "paging_options": {
     "PageNumber": 1
    }
   },
   "id": 1
  }
  ```
</CollapsibleSection> 