export const title = "Komodo DeFi Framework Method: Sell";
export const description = "The sell method issues a sell request and attempts to match an order from the orderbook based on the provided arguments.";

# Sell

## sell {{label: 'sell', tag: 'API-v1'}}

The `sell` method issues a sell request and attempts to match an order from the orderbook based on the provided arguments.

<Note>
  Buy and sell methods always create the `taker` order first. A `taker` order must pay a `dexfee` during the swap as it is taking liquidity from the market. The `dexfee` is calculated as "the greater of either `Minimum transaction amount (dust) TAKER COIN` or `0.0001 TAKER COIN` or `1/777th` the size of the desired order". If your `GoodTillCancelled` order is not matched in 30 seconds, the order is automatically converted to a `maker` request and stays on the orderbook until the request is matched or cancelled. To always act as a maker, please use the [setprice](/komodo-defi-framework/api/legacy/setprice/) method. To prevent a user from making trades in which the transaction fees may end up costing a significant portion of the value of the trade, we have set a lower limit to the value of a trade. See the description of the `volume` argument for more info.
</Note>

### Request arguments

| Parameter         | Type                       | Required | Default | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ----------------- | -------------------------- | :------: | :-----: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| base              | string                     |     ✓    |    -    | The name of the coin the user desires to sell                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| rel               | string                     |     ✓    |    -    | The name of the coin the user desires to receive                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| price             | numeric string or rational |     ✓    |    -    | The amount of `rel` coins the user wants to receive for each unit of the `base` coin spent.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| volume            | numeric string or rational |     ✓    |    -    | The maximum amount of `base` coin available for sale in the order, ignored if max is `true`; the following values must be greater than or equal to the `min_trading_vol` of the corresponding coin: <ul><li>the argument `volume`</li><li>the product of the arguments `volume` and `price`</li></ul>                                                                                                                                                                                                                                                               |
| base\_confs       | number                     |     ✗    |    -    | Number of required blockchain confirmations for base coin atomic swap transaction; default to base coin configuration if not set                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| base\_nota        | bool                       |     ✗    |    -    | Whether dPoW notarization is required for base coin atomic swap transaction; default to base coin configuration if not set                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| match\_by         | object                     |     ✗    |    -    | Optional. A standard [MatchBy](/komodo-defi-framework/api/common_structures/orders/#match-by) object, to filter to include only matches by pubkey or uuid. *Important:* This condition is not applied after a `GoodTillCancelled` order is converted to a `maker` request.                                                                                                                                                                                                                                                                                          |
| min\_volume       | numeric string or rational |     ✗    |    -    | The amount of `base` coin that will be used as `min_volume` of `GoodTillCancelled` order after conversion to maker; the following values must be greater than or equal to the `min_trading_vol` of the corresponding coin: <ul><li>the argument `min_volume`</li><li>the product of the arguments `min_volume` and `price`</li></ul>. Can be a numeric string, expressed using standard [RationalValue](/komodo-defi-framework/api/common_structures/#rational-value) or [FractionalValue](/komodo-defi-framework/api/common_structures/#fractional-value) objects. |
| order\_type       | object                     |     ✗    |    -    | Optional. A standard [OrderType](/komodo-defi-framework/api/common_structures/orders/#order-type) object.                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| rel\_confs        | number                     |     ✗    |    -    | Number of required blockchain confirmations for rel coin atomic swap transaction; default to rel coin configuration if not set                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| rel\_nota         | bool                       |     ✗    |    -    | Whether dPoW notarization is required for rel coin atomic swap transaction; default to rel coin configuration if not set                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| save\_in\_history | boolean                    |     ✗    |  `true` | Defaults to `true`. If set to `false` no order history will be saved (though order status will be temporarily stored while in progress). If `true`, each order's short record history is stored in a local SQLite database table, and when the order is cancelled or fully matched, its history will be saved as a json file                                                                                                                                                                                                                                        |

### Response parameters

| Parameter               | Type           | Description                                                                                                                                                                                                                                                      |
| ----------------------- | -------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| action                  | string         | The action of the request (`Sell`)                                                                                                                                                                                                                               |
| base                    | string         | The base currency of the request                                                                                                                                                                                                                                 |
| base\_amount            | numeric string | The resulting amount of base currency that is sold if the order matches, represented as a decimal value.                                                                                                                                                         |
| base\_amount\_rat       | rational       | The resulting amount of base currency that is sold if the order matches, represented as a standard [RationalValue](/komodo-defi-framework/api/common_structures/#rational-value) object.                                                                         |
| base\_orderbook\_ticker | string         | The ticker of the base currency if `orderbook_ticker` is configured for the base currency in `coins` file. If not defined, will return a null value.                                                                                                             |
| conf\_settings          | object         | A standard [ConfSettings](/komodo-defi-framework/api/common_structures/orders/#conf-settings) object.                                                                                                                                                            |
| dest\_pub\_key          | string         | Reserved for future use. The `dest_pub_key` allows the user to choose the P2P node that is eligible to match with the request. This value defaults to "zero pubkey", meaning that `anyone` can match                                                             |
| match\_by               | object         | A standard [MatchBy](/komodo-defi-framework/api/common_structures/orders/#match-by) object, to filter to include only matches by pubkey or uuid. *Important:* This condition is not applied after a `GoodTillCancelled` order is converted to a `maker` request. |
| method                  | string         | This field is used for internal P2P interactions; the value is always equal to "request"                                                                                                                                                                         |
| rel                     | string         | The rel currency of the request                                                                                                                                                                                                                                  |
| rel\_amount             | string         | The minimum amount of `rel` coin that must be received in order to sell the `base_amount` of `base` (according to `price`, in decimal representation)                                                                                                            |
| rel\_amount\_rat        | rational       | The minimum amount of `rel` coin that must be received in order to sell the `base_amount` of `base` (according to `price`, represented as a standard [RationalValue](/komodo-defi-framework/api/common_structures/#rational-value) object).                      |
| rel\_orderbook\_ticker  | string         | The ticker of the rel currency if `orderbook_ticker` is configured for the rel currency in `coins` file. If not defined, will return a null value.                                                                                                               |
| sender\_pubkey          | string         | The public key of our node                                                                                                                                                                                                                                       |
| uuid                    | string         | The request uuid                                                                                                                                                                                                                                                 |

#### 📌 Example

#### Request (decimal representation)

<CodeGroup title="sell" tag="POST" label="sell" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "sell",
    "base": "DOC",
    "rel": "MARTY",
    "price": 1.1,
    "volume": 2.4
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  #### Response

  ```json
  {
      // ... example response ...
  }
  ```
</CollapsibleSection>
