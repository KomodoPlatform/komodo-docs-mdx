export const title = "Komodo DeFi Framework Method: Setprice";
export const description = "The setprice method places an order on the orderbook, and it relies on this node acting as a maker, also called a Bob node.";

# Setprice

## setprice {{label: 'setprice', tag: 'API-v1'}}

The `setprice` method places an order on the orderbook, and it relies on this node acting as a maker, also called a Bob node.

The `setprice` order is always considered a sell, for internal implementation convenience.

<Note type="info">
  To prevent a user from making trades in which the transaction fees may end up costing a significant portion of the value of the trade, we have set a lower limit to the value of a trade. See the description of the `volume` and `min_volume` arguments for more info.
</Note>

### Request Parameters

| Parameter         | Type    | Required | Default | Description                                                                                                                                                                                                                                                                                                                       |
| ----------------- | ------- | :------: | :-----: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| base              | string  |     ✓    |    -    | The name of the coin the user desires to sell                                                                                                                                                                                                                                                                                     |
| rel               | string  |     ✓    |    -    | The name of the coin the user desires to receive                                                                                                                                                                                                                                                                                  |
| price             | various |     ✓    |    -    | The amount of `rel` coins the user wants to receive for each unit of the `base` coin spent. Can be a numeric string, expressed using standard [RationalValue](/komodo-defi-framework/api/common_structures/#rational-value) or [FractionalValue](/komodo-defi-framework/api/common_structures/#fractional-value) objects.         |
| volume            | various |     ✗    |    -    | The maximum amount of `base` coin available for sale in the order, ignored if max is `true`; the following values must be greater than or equal to the `min_trading_vol` of the corresponding coin: <ul><li>the argument `volume`</li><li>the product of the arguments `volume` and `price`</li></ul>                             |
| min\_volume       | various |     ✗    |    -    | The minimum amount of `base` coin available for sale in the order; it must be less or equal than `volume` param; the following values must be greater than or equal to the `min_trading_vol` of the corresponding coin: <ul><li>the argument `min_volume`</li><li>the product of the arguments `min_volume` and `price`</li></ul> |
| max               | bool    |     ✗    | `false` | Komodo DeFi Framework API will use the entire coin balance for the order, taking `0.001` coins into reserve to account for fees                                                                                                                                                                                                   |
| cancel\_previous  | bool    |     ✗    |  `true` | Komodo DeFi Framework API will cancel all existing orders for the selected pair by default; set this value to `false` to prevent this behavior                                                                                                                                                                                    |
| base\_confs       | number  |     ✗    |    -    | Number of required blockchain confirmations for base coin atomic swap transaction; default to base coin configuration if not set                                                                                                                                                                                                  |
| base\_nota        | bool    |     ✗    |    -    | Whether dPoW notarization is required for base coin atomic swap transaction; default to base coin configuration if not set                                                                                                                                                                                                        |
| rel\_confs        | number  |     ✗    |    -    | Number of required blockchain confirmations for rel coin atomic swap transaction; default to rel coin configuration if not set                                                                                                                                                                                                    |
| rel\_nota         | bool    |     ✗    |    -    | Whether dPoW notarization is required for rel coin atomic swap transaction; default to base coin configuration if not set                                                                                                                                                                                                         |
| save\_in\_history | boolean |     ✗    |  `true` | Defaults to `true`. If set to `false` no order history will be saved (though order status will be temporarily stored while in progress). If `true`, each order's short record history is stored in a local SQLite database table, and when the order is cancelled or fully matched, its history will be saved as a json file      |

### Response parameters

| Parameter               | Type             | Description                                                                                                                                          |
| ----------------------- | ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| result                  | object           | The resulting order object                                                                                                                           |
| base                    | string           | The base coin of the order                                                                                                                           |
| rel                     | string           | The rel coin of the order                                                                                                                            |
| price                   | string (numeric) | The expected amount of `rel` coin to be received per 1 unit of `base` coin; decimal representation                                                   |
| price\_rat              | rational         | The expected amount of `rel` coin to be received per 1 unit of `base` coin; rational representation                                                  |
| max\_base\_vol          | string (numeric) | The maximum volume of base coin available to trade; decimal representation                                                                           |
| max\_base\_vol\_rat     | rational         | The maximum volume of base coin available to trade; rational representation                                                                          |
| min\_base\_vol          | string (numeric) | Komodo DeFi Framework API won't match with other orders that attempt to trade less than `min_base_vol`; decimal representation                       |
| min\_base\_vol\_rat     | rational         | Komodo DeFi Framework API won't match with other orders that attempt to trade less than `min_base_vol`; rational representation                      |
| created\_at             | number           | Unix timestamp in milliseconds, indicating the order creation time                                                                                   |
| updated\_at             | number           | Unix timestamp in milliseconds, indicating the order update time                                                                                     |
| matches                 | object           | Contains the map of ongoing matches with other orders, empty as the order was recently created                                                       |
| started\_swaps          | array of strings | UUIDs of swaps that were initiated by the order                                                                                                      |
| uuid                    | string           | UUID of the created order                                                                                                                            |
| conf\_settings          | object           | A standard [ConfSettings](/komodo-defi-framework/api/common_structures/orders/#conf-settings) object.                                                |
| base\_orderbook\_ticker | string           | The ticker of the base currency if `orderbook_ticker` is configured for the base currency in `coins` file. If not defined, will return a null value. |
| rel\_orderbook\_ticker  | string           | The ticker of the rel currency if `orderbook_ticker` is configured for the rel currency in `coins` file. If not defined, will return a null value.   |

<Note type="info">
  If your `setprice` order includes UTXO coins activated via electrum, and connection to its servers is lost, your order will automatically cancel and will need to be recreated once the connection is restored.
</Note>

#### 📌 Examples

#### Request (with volume)

<CodeGroup title="setprice" tag="POST" label="setprice" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "setprice",
    "base": "DOC",
    "rel": "MARTY",
    "price": "0.9",
    "volume": "1"
  }
  ```
</CodeGroup>

#### Request (max = true)

<CodeGroup title="setprice" tag="POST" label="setprice" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "setprice",
    "base": "DOC",
    "rel": "MARTY",
    "price": "0.9",
    "max": true
  }
  ```
</CodeGroup>

#### Request (rational representation in num-rational crate format)

<CodeGroup title="setprice" tag="POST" label="setprice" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "setprice",
    "base": "DOC",
    "rel": "MARTY",
    "volume": [
      [
        1,
        [
          1
        ]
      ],
      [
        1,
        [
          1
        ]
      ]
    ],
    "price": [
      [
        1,
        [
          1
        ]
      ],
      [
        1,
        [
          1
        ]
      ]
    ]
  }
  ```
</CodeGroup>

#### Request (rational representation as fraction object)

<CodeGroup title="setprice" tag="POST" label="setprice" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "setprice",
    "base": "DOC",
    "rel": "MARTY",
    "volume": {
      "numer": "3",
      "denom": "2"
    },
    "price": {
      "numer": "2",
      "denom": "1"
    }
  }
  ```
</CodeGroup>

#### Request (with min\_volume)

<CodeGroup title="setprice" tag="POST" label="setprice" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "setprice",
    "base": "DOC",
    "rel": "MARTY",
    "volume": {
      "numer": "3",
      "denom": "2"
    },
    "price": {
      "numer": "2",
      "denom": "1"
    },
    "min_volume": "1"
  }
  ```
</CodeGroup>

#### Request (with confirmations and notarization settings)

<CodeGroup title="setprice" tag="POST" label="setprice" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "setprice",
    "base": "DOC",
    "rel": "MARTY",
    "volume": {
      "numer": "3",
      "denom": "2"
    },
    "price": {
      "numer": "2",
      "denom": "1"
    },
    "base_confs": 2,
    "base_nota": true,
    "rel_confs": 5,
    "rel_nota": false
  }
  ```
</CodeGroup>

#### Request (set to not save order history)

<CodeGroup title="setprice" tag="POST" label="setprice" mm2MethodDecorate="true">
  ```json
  {
    "userpass": "RPC_UserP@SSW0RD",
    "method": "setprice",
    "base": "KMD",
    "rel": "LTC",
    "volume": {
      "numer": "4",
      "denom": "3"
    },
    "price": {
      "numer": "7",
      "denom": "12"
    },
    "save_in_history": false
  }
  ```
</CodeGroup>

<CollapsibleSection expandedText="Hide Response" collapsedText="Show Response">
  #### Response (success)

  ```json
  {
      "result": {
          "base": "DOC",
          "rel": "MARTY",
          "max_base_vol": "1",
          "max_base_vol_rat": [
              [1, [1]],
              [1, [1]]
          ],
          "min_base_vol": "0",
          "min_base_vol": [
              [0, []],
              [1, [1]]
          ],
          "created_at": 1559052299258,
          "matches": {},
          "price": "1",
          "price_rat": [
              [1, [1]],
              [1, [1]]
          ],
          "started_swaps": [],
          "uuid": "6a242691-6c05-474a-85c1-5b3f42278f41",
          "conf_settings": {
              "base_confs": 2,
              "base_nota": true,
              "rel_confs": 5,
              "rel_nota": false
          }
      },
      "base_orderbook_ticker": null,
      "rel_orderbook_ticker": null
  }
  ```

  #### Error response

  ```json
  { "error": "Rel coin MARTY is not found" }
  ```
</CollapsibleSection>
