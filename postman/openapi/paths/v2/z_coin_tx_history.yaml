/z_coin_tx_history:
  post:
    operationId: z_coin_tx_history
    summary: ZHTLC Coin Transaction History
    description: |
      To get the transaction history for ZHTLC coins, you need to use this special method - the v2 my_tx_history and legacy my_tx_history methods are not compatible with ZHTLC coins. Currently transaction memos will not be displayed in output, though they can be added to outgoing transactions with the task::withdraw methods.
    x-mdx-doc-path: ../../src/pages/komodo-defi-framework/api/v20/wallet/tx/zhtlc_tx_history/index.mdx
    requestBody:
      required: true
      content:
        application/json:
          schema:
            allOf:
              - $ref: '../../../components/schemas/Common.yaml#/RpcV2Request'
              - type: object
                properties:
                  method:
                    type: string
                    enum: ["z_coin_tx_history"]
                    description: The method name
                    example: "z_coin_tx_history"
                  params:
                    type: object
                    properties:
                      coin:
                        $ref: ../../../components/schemas/Common.yaml#/CoinTicker
                        description: Ticker of the coin to get history for
                      limit:
                        type: integer
                        description: Optional. Limits the number of returned transactions. Defaults to 10. Ignored if max = true
                        default: 10
                        example: 2
                      paging_options:
                        type: object
                        description: Optional paging configuration
                        properties:
                          FromId:
                            type: string
                            description: Optional. Komodo DeFi Framework API will skip records until it reaches this ID, skipping the from_id as well; track the internal_id of the last displayed transaction to find the value of this field for the next page
                          PageNumber:
                            type: integer
                            description: Optional. Komodo DeFi Framework API will return limit swaps from the selected page. Ignored if FromId is provided
                            example: 2
                    required:
                      - coin
    responses:
      '200':
        description: Transaction history retrieved successfully
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../../../components/schemas/Common.yaml#/RpcSuccessResponse'
                - type: object
                  properties:
                    result:
                      type: object
                      properties:
                        coin:
                          $ref: ../../../components/schemas/Common.yaml#/CoinTicker
                          description: The coin ticker
                        target:
                          type: object
                          properties:
                            type:
                              type: string
                              example: "iguana"
                          required:
                            - type
                        current_block:
                          type: integer
                          description: The number of the latest block of coin blockchain
                          example: 2228711
                        transactions:
                          type: array
                          description: Array of transaction data
                          items:
                            type: object
                            properties:
                              tx_hash:
                                type: string
                                pattern: "^[a-fA-F0-9]{64}$"
                                description: Transaction hash (64-character hex string)
                                example: "b7e8307778d7d61ebb2ebc7a130661ef6fbeb66ee5d15d0f84a3bfce3ebad5a1"
                              from:
                                type: array
                                items:
                                  type: string
                                description: Addresses that sent funds in this transaction
                                example: ["zs1e3puxpnal8ljjrqlxv4jctlyndxnm5a3mj5rarjvp0qv72hmm9caduxk9asu9kyc6erfx4zsauj"]
                              to:
                                type: array
                                items:
                                  type: string
                                description: Addresses that received funds in this transaction
                                example: ["zs1e3puxpnal8ljjrqlxv4jctlyndxnm5a3mj5rarjvp0qv72hmm9caduxk9asu9kyc6erfx4zsauj"]
                              spent_by_me:
                                $ref: ../../../components/schemas/Common.yaml#/AmountString
                                description: Amount spent by user in this transaction
                              received_by_me:
                                $ref: ../../../components/schemas/Common.yaml#/AmountString
                                description: Amount received by user in this transaction
                              my_balance_change:
                                $ref: ../../../components/schemas/Common.yaml#/AmountString
                                description: Net balance change for user from this transaction
                              block_height:
                                type: integer
                                description: Block height where this transaction was included
                                example: 2224011
                              confirmations:
                                type: integer
                                description: Number of confirmations for this transaction
                                example: 4701
                              timestamp:
                                type: integer
                                description: Unix timestamp when transaction was confirmed
                                example: 1673018341
                              transaction_fee:
                                $ref: ../../../components/schemas/Common.yaml#/AmountString
                                description: Transaction fee paid
                              coin:
                                $ref: ../../../components/schemas/Common.yaml#/CoinTicker
                                description: Coin ticker
                              internal_id:
                                type: integer
                                description: Internal transaction ID for pagination
                                example: 26
                            required:
                              - tx_hash
                              - from
                              - to
                              - spent_by_me
                              - received_by_me
                              - my_balance_change
                              - block_height
                              - confirmations
                              - timestamp
                              - transaction_fee
                              - coin
                              - internal_id
                        sync_status:
                          type: object
                          description: Sync status object
                          properties:
                            state:
                              type: string
                              description: Current sync state
                              example: "Finished"
                          required:
                            - state
                        from_id:
                          type: string
                          nullable: true
                          description: The from_id specified in the request; null if from_id was not set
                        skipped:
                          type: integer
                          description: The number of skipped records; 0 if from_id was not set
                          example: 2
                        limit:
                          type: integer
                          description: The limit that was set in the request
                          example: 2
                        total:
                          type: integer
                          description: The total number of transactions available
                          example: 28
                        page_number:
                          type: integer
                          nullable: true
                          description: The page_number that was set in the request
                        total_pages:
                          type: integer
                          description: Total pages available with the selected limit
                          example: 14
                        paging_options:
                          type: object
                          properties:
                            PageNumber:
                              type: integer
                              example: 2
                      required:
                        - coin
                        - target
                        - current_block
                        - transactions
                        - sync_status
                        - from_id
                        - skipped
                        - limit
                        - total
                        - page_number
                        - total_pages
      '400':
        description: Bad request
        content:
          application/json:
            schema:
              $ref: '../../../components/schemas/Common.yaml#/RpcErrorResponse'
      '500':
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: '../../../components/schemas/Common.yaml#/RpcErrorResponse' 