/enable_bch_with_tokens:
  post:
    operationId: enable_bch_with_tokens
    summary: Enable BCH with SLP Tokens
    description: |
      Enable BCH/tBCH along with multiple SLP tokens in a single command.
      The Komodo DeFi Framework supports Bitcoin Cash SLP tokens.
    x-mdx-doc-path: ../../src/pages/komodo-defi-framework/api/v20/coin_activation/enable_bch_with_tokens/index.mdx
    requestBody:
      required: true
      content:
        application/json:
          schema:
            allOf:
              - $ref: '../../../components/schemas/Common.yaml#/RpcV2Request'
              - type: object
                properties:
                  method:
                    type: string
                    enum: ["enable_bch_with_tokens"]
                    description: The method name
                    example: "enable_bch_with_tokens
                  params:
                    type: object
                    required:
                      - ticker
                      - bchd_urls
                      - mode
                      - slp_tokens_requests
                    properties:
                      ticker:
                        type: string
                        enum: ["BCH", "tBCH"]
                        description: Ticker of the platform protocol coin
                        example: "BCH
                      bchd_urls:
                        type: array
                        items:
                          $ref: ../../../components/schemas/Common.yaml#/UrlString
                        description: A list of BCHD gRPC API server URLs, used for validation of SLP token transactions
                        example: ["https://bchd.dragonhound.info"]
                      mode:
                        $ref: ../../components/schemas/Activation.yaml#/ActivationMode
                        description: A standard ActivationMode object
                      slp_tokens_requests:
                        type: array
                        items:
                          $ref: ../../components/schemas/Activation.yaml#/TokensRequest
                        description: A list of standard TokensRequest objects
                      tx_history:
                        type: boolean
                        description: If true, spawns a background loop to store the local cache of address(es) transactions. Defaults to false
                        default: false
                        example: true
                      address_format:
                        $ref: ../../components/schemas/Activation.yaml#/AddressFormat
                        description: Optional. Overwrites the address format from coins file, if set. A standard AddressFormat object
                      allow_slp_unsafe_conf:
                        type: boolean
                        description: Optional, defaults to false. If true, allows bchd_urls to be empty. Warning - it is highly unsafe to do so as it may lead to invalid SLP transactions generation and tokens burning
                        default: false
                        example: false
                      get_balances:
                        type: boolean
                        description: Optional, defaults to true. If false, coin and token balances will not be returned in the response, and the response will be returned more quickly
                        default: true
                        example: true
                      required_confirmations:
                        type: integer
                        description: Optional, defaults to value in the coins file, or 3 if not set. Confirmations to wait for steps in swap
                        example: 5
                      requires_notarization:
                        type: boolean
                        description: Optional, defaults to true. Has no effect on BCH
                        default: true
                        example: false
                      utxo_merge_params:
                        $ref: ../../components/schemas/Activation.yaml#/UtxoMergeParams
                        description: A standard UtxoMergeParams object. Used to reduce a wallet's UTXO count in cases where it is causing significantly slower RPC responses
    responses:
      '200':
        description: BCH with tokens enabled successfully
        content:
          application/json:
            schema:
              allOf:
                - $ref: '../../../components/schemas/Common.yaml#/RpcSuccessResponse'
                - type: object
                  properties:
                    result:
                      type: object
                      properties:
                        current_block:
                          type: integer
                          description: Block height of the coin being activated
                          example: 1480481
                        bch_addresses_infos:
                          type: object
                          description: A standard AddressInfo object. Note - the structure may vary based on the value of the get_balances parameter
                          additionalProperties:
                            $ref: ../../components/schemas/Activation.yaml#/AddressInfo
                        slp_addresses_infos:
                          type: object
                          description: A standard AddressInfo object. Note - the structure may vary based on the value of the get_balances parameter
                          additionalProperties:
                            $ref: ../../components/schemas/Activation.yaml#/AddressInfo
                      required:
                        - current_block
                        - bch_addresses_infos
                        - slp_addresses_infos
      '400':
        description: Bad request - Invalid parameters
        content:
          application/json:
            schema:
              $ref: '../../../components/schemas/Common.yaml#/RpcErrorResponse'
      '500':
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: '../../../components/schemas/Common.yaml#/RpcErrorResponse' 