# OpenAPI path spec for metrics (v1)
/api/v1/metrics:
  post:
    operationId: metrics
    summary: Komodo DeFi Framework Method: Metrics
    description: The metrics method returns a snapshot of the current Komodo DeFi Framework API metrics used in Prometheus and Grafana.
    x-mdx-doc-path: ../../../../src/pages/komodo-defi-framework/api/legacy/metrics/index.mdx
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              userpass:
                type: string
                description: RPC authentication password.
              method:
                type: string
                enum: [metrics]
                description: Method name (must be 'metrics').
            required:
              - userpass
              - method
    responses:
      '200':
        description: Success
        content:
          application/json:
            schema:
              type: object
              properties:
                metrics:
                  type: array
                  items:
                    type: object
                    properties:
                      type:
                        type: string
                        description: A metric type which indicates how it should be displayed in visualisation.
                      key:
                        type: string
                        description: A descriptive name assigned to the metric.
                      labels:
                        type: object
                        description: Labels can be used to group similar metrics together or provide additional context.
                      value:
                        type: number
                        description: Returned if type is gauge. A numeric value which indicates the magnitude of the metric being measured.
                      count:
                        type: number
                        description: Returned if type is histogram. How many values were measured.
                      min:
                        type: number
                        description: Returned if type is histogram. The smallest value measured.
                      max:
                        type: number
                        description: Returned if type is histogram. The highest value measured.
                  description: There are a variety of metrics returned, with each metrics object having a type, key, label, and some values which vary by type.
              required:
                - metrics
      '400':
        description: Bad request
      '500':
        description: Internal server error
    # TODO: Use $ref to schemas if/when available in components/schemas 