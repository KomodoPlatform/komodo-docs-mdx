/trade_preimage:
  post:
    operationId: trade_preimage
    summary: Trade Preimage (Deprecated)
    description: |
      Returns the approximate fee amounts that are paid per the whole swap.
      Depending on the parameters, the function returns different results.
      This function is deprecated. Please consider using trade_preimage v2.0 instead.
    x-mdx-doc-path: ../../src/pages/komodo-defi-framework/api/legacy/trade_preimage/index.mdx
    deprecated: true
    requestBody:
      required: true
      content:
        application/json:
          schema:
            allOf:
              - $ref: '../../../components/schemas/Common.yaml#/RpcV1Request'
              - type: object
                properties:
                  method:
                    type: string
                    enum: ["trade_preimage"]
                    description: The method name
                    example: "trade_preimage
                  base:
                    $ref: ../../../components/schemas/Common.yaml#/CoinTicker
                    description: The base currency of the request
                  rel:
                    $ref: ../../../components/schemas/Common.yaml#/CoinTicker
                    description: The rel currency of the request
                  swap_method:
                    type: string
                    enum: ["buy", "sell", "setprice"]
                    description: The name of the method whose preimage is requested
                    example: "setprice
                  price:
                    oneOf:
                      - $ref: ../../../components/schemas/Common.yaml#/AmountString
                      - type: number
                      - $ref: ../../components/schemas/Orders.yaml#/RationalValue
                    description: The price in rel the user is willing to pay per one unit of the base coin
                    example: "1
                  volume:
                    oneOf:
                      - $ref: ../../../components/schemas/Common.yaml#/AmountString
                      - type: number
                      - $ref: ../../components/schemas/Orders.yaml#/RationalValue
                    description: |
                      The amount the user is willing to trade; ignored if max = true and swap_method = setprice, 
                      otherwise, it must be set
                    example: "0.1
                  max:
                    type: boolean
                    description: |
                      Whether to return the maximum available volume for setprice method; 
                      must not be set or false if swap_method is buy or sell
                    example: false
                required:
                  - base
                  - rel
                  - swap_method
                  - price
    responses:
      '200':
        description: Trade preimage calculated successfully
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  type: object
                  properties:
                    base_coin_fee:
                      $ref: ../../components/schemas/Fees.yaml#/ExtendedFeeInfo
                      description: A standard ExtendedFeeInfo object. The approximate miner fee paid per the whole swap concerning the base coin
                    rel_coin_fee:
                      $ref: ../../components/schemas/Fees.yaml#/ExtendedFeeInfo
                      description: A standard ExtendedFeeInfo object. The approximate miner fee paid per the whole swap concerning the rel coin
                    volume:
                      $ref: ../../../components/schemas/Common.yaml#/AmountString
                      description: Optional. The max available volume that can be traded (in decimal representation); empty if the max argument is missing or false
                      example: "10.5
                    volume_rat:
                      $ref: ../../components/schemas/Orders.yaml#/RationalValue
                      description: Optional. The max available volume that can be traded as a rational value
                    volume_fraction:
                      $ref: ../../components/schemas/Orders.yaml#/FractionalValue
                      description: Optional. The max available volume that can be traded as a fractional value
                    taker_fee:
                      $ref: ../../components/schemas/Fees.yaml#/ExtendedFeeInfo
                      description: A standard ExtendedFeeInfo object. The dex fee to be paid by Taker; empty if swap_method is setprice
                    fee_to_send_taker_fee:
                      $ref: ../../components/schemas/Fees.yaml#/ExtendedFeeInfo
                      description: A standard ExtendedFeeInfo object. The approximate miner fee paid to send the dex fee; empty if swap_method is setprice
                    total_fees:
                      type: array
                      description: A standard TotalFeeInfo object array. Each element is a sum of fees required to be paid from user's balance
                      items:
                        $ref: ../../components/schemas/Fees.yaml#/TotalFeeInfo
                  required:
                    - base_coin_fee
                    - rel_coin_fee
              required:
                - result
      '400':
        description: Bad request - Invalid parameters
        content:
          application/json:
            schema:
              $ref: '../../../components/schemas/Common.yaml#/RpcErrorResponse'
      '500':
        description: Internal server error
        content:
          application/json:
            schema:
              $ref: '../../../components/schemas/Common.yaml#/RpcErrorResponse' 